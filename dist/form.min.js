const form=document.getElementById("formulaireRecommandation"),modal=document.getElementById("modalConfirmation"),submitButton=document.getElementById("submitButton");form.addEventListener("submit",async e=>{e.preventDefault(),submitButton.textContent="Envoi en cours...",submitButton.disabled=!0;const t=new FormData(form);try{(await fetch("/",{method:"POST",body:t})).ok?(form.reset(),modal.classList.remove("hidden")):alert("❌ Erreur lors de l'envoi du formulaire. Veuillez vérifier vos champs et réessayer.")}catch(e){console.error("Erreur de soumission:",e),alert("❌ Échec de la connexion. Veuillez vérifier votre réseau.")}finally{submitButton.textContent="Envoyer la recommandation",submitButton.disabled=!1}}),modal.addEventListener("click",e=>{e.target===modal&&modal.classList.add("hidden")});