document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".burger-menu"),t=document.getElementById("main-nav"),n=document.querySelectorAll(".main-nav a"),s=document.getElementById("current-year");s&&(s.textContent=(new Date).getFullYear());const a=()=>{const e=document.getElementById("timeline-container"),t=document.getElementById("progress-line"),n=document.querySelectorAll(".step-container");if(!e||!t)return;const s=e.getBoundingClientRect(),a=window.innerHeight/1.5,i=Math.max(0,Math.min(100,(a-s.top)/s.height*100));t.style.height=`${i}%`,n.forEach(e=>{const t=e.querySelector(".timeline-dot"),n=e.querySelector(".ghost-text"),s=e.getBoundingClientRect();s.top+s.height/4<a?(t&&t.classList.add("bg-validate","scale-125"),n&&n.classList.add("active")):(t&&t.classList.remove("bg-validate","scale-125"),n&&n.classList.remove("active"))})};if(e&&t){const s=(n=!1)=>{const s=!!n||"true"===e.getAttribute("aria-expanded"),a=s?"remove":"add";document.body.classList[a]("no-scroll"),e.setAttribute("aria-expanded",String(!s)),t.classList[a]("is-active"),e.classList[a]("is-active")};e.addEventListener("click",()=>s()),n.forEach(e=>{e.addEventListener("click",()=>{t.classList.contains("is-active")&&s(!0)})})}let i=!1;document.querySelectorAll(".calendly-popup-trigger").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),(i?Promise.resolve():new Promise(e=>{const t=document.createElement("link");t.href="https://assets.calendly.com/assets/external/widget.css",t.rel="stylesheet",document.head.appendChild(t);const n=document.createElement("script");n.src="https://assets.calendly.com/assets/external/widget.js",n.async=!0,n.onload=()=>{i=!0,e()},document.body.appendChild(n)})).then(()=>{window.Calendly&&Calendly.initPopupWidget({url:"https://calendly.com/aurore-am20/20min?hide_event_type_details=1&text_color=14244f&primary_color=4d0fa5"})})})}),document.querySelectorAll(".protected-mail").forEach(e=>{const t=e.dataset.user,n=e.dataset.domain;if(!t||!n)return;const s=`${t}@${n}`,a=e.querySelector("svg");e.textContent="",a&&e.appendChild(a),e.appendChild(document.createTextNode(s)),e.href=`mailto:${s}`}),(()=>{const e=document.querySelectorAll(".faq-item");e.forEach(t=>{const n=t.querySelector(".faq-toggle"),s=t.querySelector(".faq-content");n&&s&&n.addEventListener("click",()=>{const a=t.classList.contains("is-open");e.forEach(e=>{e!==t&&e.classList.contains("is-open")&&(e.querySelector(".faq-content").style.maxHeight="0",e.classList.remove("is-open"),e.querySelector(".faq-toggle").setAttribute("aria-expanded","false"))}),t.classList.toggle("is-open",!a),s.style.maxHeight=a?"0":s.scrollHeight+"px",n.setAttribute("aria-expanded",String(!a))})})})(),document.querySelectorAll(".cta-accent, .calendly-popup-trigger").forEach(e=>{e.addEventListener("click",function(e){if(this.classList.contains("animating"))return;this.classList.add("animating");const t=document.createElement("span");t.classList.add("ripple-circle"),this.appendChild(t),requestAnimationFrame(()=>{t.classList.add("ripple-animate")}),setTimeout(()=>{this.classList.add("cta-clicked")},100),setTimeout(()=>{this.classList.remove("cta-clicked"),this.classList.remove("animating")},1e3),t.addEventListener("animationend",()=>{t.remove()})})}),(()=>{const e=document.querySelectorAll("section[id], header[id]"),t=document.querySelectorAll(".main-nav a:not(.cta)"),n=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target.getAttribute("id");t.forEach(e=>{e.classList.remove("active","scribble-underline-green"),e.getAttribute("href")===`#${n}`&&e.classList.add("active","scribble-underline-green")})}})},{root:null,rootMargin:"-25% 0px -65% 0px",threshold:0});e.forEach(e=>n.observe(e))})(),(()=>{const e=document.getElementById("mobile-fab");if(!e)return;const t=()=>{window.scrollY>300?e.classList.add("is-visible"):e.classList.remove("is-visible")};window.addEventListener("scroll",()=>{requestAnimationFrame(t)},{passive:!0})})(),(()=>{const e=document.querySelectorAll(".animate-on-scroll"),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target;t.classList.add("animated","opacity-100","translate-y-0"),t.classList.remove("opacity-0","translate-y-10"),t.querySelectorAll(".counter").forEach(e=>function(e,t=2500){if(e.classList.contains("counting"))return;const n=parseInt(e.getAttribute("data-target")),s=e.getAttribute("data-prefix")||"",a=e.getAttribute("data-suffix")||"";if(isNaN(n))return;let i=performance.now();e.classList.add("counting");const c=o=>{const r=o-i,l=Math.min(r/t,1),d=Math.floor(l*n);e.textContent=s+d.toLocaleString()+a,l<1?requestAnimationFrame(c):(e.textContent=s+n.toLocaleString()+a,e.classList.remove("counting"))};requestAnimationFrame(c)}(e))}})},{threshold:.1});e.forEach(e=>t.observe(e))})(),a(),window.addEventListener("scroll",a,{passive:!0})});