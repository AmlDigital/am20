document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".burger-menu"),t=document.getElementById("main-nav"),s=document.querySelectorAll(".main-nav a"),a=document.getElementById("current-year");a&&(a.textContent=(new Date).getFullYear());const n=document.querySelectorAll(".animate-on-scroll"),i=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target;if(e.isIntersecting){t.classList.add("animated"),t.classList.remove("opacity-0","translate-y-10"),t.classList.add("opacity-100","translate-y-0");t.querySelectorAll(".counter").forEach(e=>function(e,t=2500){if(e.classList.contains("counting"))return;const s=parseInt(e.getAttribute("data-target")),a=e.getAttribute("data-prefix")||"",n=e.getAttribute("data-suffix")||"";if(isNaN(s))return;let i=performance.now();e.classList.add("counting");const c=r=>{const o=r-i,l=Math.min(o/t,1),d=Math.floor(l*s);e.textContent=a+d.toLocaleString()+n,l<1?requestAnimationFrame(c):(e.textContent=a+s.toLocaleString()+n,e.classList.remove("counting"))};requestAnimationFrame(c)}(e))}})},{threshold:.1});n.forEach(e=>i.observe(e)),e&&t&&e.addEventListener("click",()=>{const s="true"===e.getAttribute("aria-expanded"),a=s?"remove":"add";document.body.classList[a]("no-scroll"),e.setAttribute("aria-expanded",String(!s)),t.classList[a]("is-active"),e.classList[a]("is-active")}),s.forEach(s=>{s.addEventListener("click",()=>{t?.classList.contains("is-active")&&(document.body.classList.remove("no-scroll"),e.setAttribute("aria-expanded","false"),t.classList.remove("is-active"),e.classList.remove("is-active"))})});let c=!1;document.querySelectorAll(".protected-mail").forEach(e=>{const t=e.dataset.user,s=e.dataset.domain;if(!t||!s)return;const a=`${t}@${s}`,n=e.querySelector("svg");e.textContent="",n&&e.appendChild(n),e.appendChild(document.createTextNode(a)),e.href=`mailto:${a}`}),(()=>{const e=document.querySelectorAll(".faq-item");e.forEach(t=>{const s=t.querySelector(".faq-toggle"),a=t.querySelector(".faq-content");s&&a&&s.addEventListener("click",()=>{const n=t.classList.contains("is-open");e.forEach(e=>{e!==t&&e.classList.contains("is-open")&&(e.querySelector(".faq-content").style.maxHeight="0",e.classList.remove("is-open"),e.querySelector(".faq-toggle").setAttribute("aria-expanded","false"))}),n?(a.style.maxHeight="0",t.classList.remove("is-open"),s.setAttribute("aria-expanded","false")):(t.classList.add("is-open"),a.style.maxHeight=a.scrollHeight+"px",s.setAttribute("aria-expanded","true"))})})})(),document.querySelectorAll(".calendly-popup-trigger").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),(c?Promise.resolve():new Promise(e=>{const t=document.createElement("link");t.href="https://assets.calendly.com/assets/external/widget.css",t.rel="stylesheet",document.head.appendChild(t);const s=document.createElement("script");s.src="https://assets.calendly.com/assets/external/widget.js",s.async=!0,s.onload=()=>{c=!0,e()},document.body.appendChild(s)})).then(()=>{window.Calendly&&Calendly.initPopupWidget({url:"https://calendly.com/aurore-am20/20min?hide_event_type_details=1&text_color=14244f&primary_color=4d0fa5"})})})}),document.querySelectorAll(".cta-accent, .calendly-popup-trigger").forEach(e=>{e.addEventListener("click",function(e){if(this.classList.contains("animating"))return;this.classList.add("animating");const t=document.createElement("span");t.classList.add("ripple-circle"),this.appendChild(t),requestAnimationFrame(()=>{t.classList.add("ripple-animate")}),setTimeout(()=>{this.classList.add("cta-clicked")},100),setTimeout(()=>{this.classList.remove("cta-clicked"),this.classList.remove("animating")},1e3),t.addEventListener("animationend",()=>{t.remove()})})}),(()=>{const e=document.querySelectorAll("section[id], header[id]"),t=document.querySelectorAll(".main-nav a:not(.cta)"),s=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const s=e.target.getAttribute("id");t.forEach(e=>{e.classList.remove("active","scribble-underline-green"),e.getAttribute("href")===`#${s}`&&(e.classList.add("active"),e.classList.add("scribble-underline-green"))})}})},{root:null,rootMargin:"-25% 0px -65% 0px",threshold:0});e.forEach(e=>s.observe(e))})(),(()=>{const e=document.getElementById("mobile-fab");if(!e)return;const t=()=>{window.scrollY>300?e.classList.add("is-visible"):e.classList.remove("is-visible")};window.addEventListener("scroll",()=>{requestAnimationFrame(t)})})(),window.addEventListener("scroll",()=>{const e=document.getElementById("timeline-container"),t=document.getElementById("progress-line"),s=document.querySelectorAll(".step-container");if(!e||!t)return;const a=e.getBoundingClientRect(),n=window.innerHeight/1.5,i=Math.max(0,Math.min(100,(n-a.top)/a.height*100));t.style.height=`${i}%`,s.forEach(e=>{const t=e.querySelector(".timeline-dot"),s=e.querySelector(".ghost-text"),a=e.getBoundingClientRect();a.top+a.height/4<n?(t&&(t.classList.add("bg-validate","shadow-[0_0_15px_rgba(137,217,87,0.8)]","scale-125"),t.classList.remove("bg-white/20")),s&&s.classList.add("active")):(t&&(t.classList.remove("bg-validate","shadow-[0_0_15px_rgba(137,217,87,0.8)]","scale-125"),t.classList.add("bg-white/20")),s&&s.classList.remove("active"))})})});